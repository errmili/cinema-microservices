<?xml version="1.0" encoding="UTF-8"?>
<configuration>

    <!-- Pattern SANS couleurs pour Docker -->
    <property name="CONSOLE_LOG_PATTERN"
              value="%d{yyyy-MM-dd HH:mm:ss.SSS} [%X{correlationId:-NO-ID}] %-5level %-40.40logger{39} : %msg%n" />

    <property name="FILE_LOG_PATTERN"
              value="%d{yyyy-MM-dd HH:mm:ss.SSS} [%X{correlationId:-NO-ID}] %-5level %-40.40logger{39} : %msg%n" />

    <!-- Console Appender -->
    <appender name="CONSOLE" class="ch.qos.logback.core.ConsoleAppender">
        <encoder>
            <pattern>${CONSOLE_LOG_PATTERN}</pattern>
            <charset>UTF-8</charset>
        </encoder>
    </appender>

    <!-- Loggers -->
    <logger name="com.spring.gateway" level="DEBUG" />
    <logger name="com.spring.gateway.filter" level="DEBUG" />
    <logger name="org.springframework.cloud.gateway" level="INFO" />
    <logger name="io.github.resilience4j" level="DEBUG" />

    <!-- Root Logger -->
    <root level="INFO">
        <appender-ref ref="CONSOLE" />
    </root>

</configuration>

        <!--
        ðŸ’¡ DIFFÃ‰RENCE AVEC L'ANCIENNE VERSION
        ======================================

        AVANT (causait l'erreur) :
        - Utilisait %clr pour les couleurs (converter Spring Boot)
        - Utilisait %wEx pour les exceptions (converter Spring Boot)
        - NÃ©cessitait des classes Spring Boot spÃ©cifiques

        APRÃˆS (fonctionne partout) :
        - Patterns Logback standard uniquement
        - Pas de couleurs (mais Ã§a fonctionne !)
        - Compatible avec tous les environnements

        NOTE : Les logs sont maintenant en noir et blanc en console,
        mais c'est un petit compromis pour la stabilitÃ© !
        Si tu veux les couleurs, on les ajoutera aprÃ¨s avec une config Spring Boot complÃ¨te.

        ðŸ“Š EXEMPLE DE LOGS
        ==================

        Console :
        2025-10-27 14:30:12.001 [abc-123] INFO  CorrelationIdFilter : ðŸ†• Nouveau Correlation ID gÃ©nÃ©rÃ© : abc-123
        2025-10-27 14:30:12.002 [abc-123] INFO  LoggingFilter       : âž¡ï¸ RequÃªte entrante : GET /movies/v1/1 - IP: 127.0.0.1
        2025-10-27 14:30:12.156 [abc-123] INFO  LoggingFilter       : â¬…ï¸ âœ… SuccÃ¨s : GET /movies/v1/1 - Status: 200 - DurÃ©e: 154ms

        Fichier (gateway.log) :
        2025-10-27 14:30:12.001 [abc-123] INFO  CorrelationIdFilter : ðŸ†• Nouveau Correlation ID gÃ©nÃ©rÃ© : abc-123

        JSON (gateway-json.log) :
        {"timestamp":"2025-10-27T14:30:12.001Z","level":"INFO","logger":"CorrelationIdFilter","message":"Nouveau Correlation ID gÃ©nÃ©rÃ©","correlationId":"abc-123","app":"cinema-gateway"}
        -->